<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />



<meta name="date" content="2020-08-31" />

<title>Descriptive statistics and graphics</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<link href="libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Descriptive statistics and graphics</h1>
<h4 class="date"><br/>August 31, 2020</h4>

</div>


<div id="objectives" class="section level1">
<h1>Objectives</h1>
<ul>
<li><p>Describe the role of statistics as part of the scientific method.</p></li>
<li><p>Know the types of data commonly used in statistics.</p></li>
<li><p>Choose appropriate summary statistics and graphical representations for different questions and types of data.</p></li>
</ul>
</div>
<div id="the-role-of-statistics" class="section level1">
<h1>The role of statistics</h1>
<div id="what-types-of-questions-require-statistics" class="section level2">
<h2>What types of questions require statistics?</h2>
<p>The statistical methods that will be presented in this course are used throughout the natural and social sciences. There are, however, several reasons why these methods occupy a prominent place in certain disciplines, such as ecology.</p>
<ul>
<li><p>We study complex systems, composed of many types of entities or individuals that interact. A given change can result in a chain of effects, feedback loops, and so on. Isolating the effect of a variable is therefore a significant challenge.</p></li>
<li><p>Individuals are not identical but vary on many levels.</p></li>
<li><p>Our ability to observe the system is limited, both in the number of variables measured, the number of individuals sampled, and the accuracy of the observations themselves.</p></li>
</ul>
</div>
<div id="the-scientific-method" class="section level2">
<h2>The scientific method</h2>
<p>The scientific method is often presented by a diagram like the one below. On the basis of past observations, researchers pose a <em>hypothesis</em> on the functioning of a system. From this hypothesis, we deduce certain <em>predictions</em>, which are compared to the result of an <em>experiment</em> designed specifically to test the hypothesis. The result leads either to the rejection of the hypothesis or to its provisional acceptance (until a competing hypothesis is proposed on the basis of new observations or results of an experiment).</p>
<p><img src="../images/methode_sci_en.PNG" /></p>
<p>In fact, every scientific study does not follow this whole pattern. Different teams can make new observations, formulate new theories or hypotheses, and design experiments to test these hypotheses. For some systems, it is not ethical or practical to perform controlled experiments, so hypotheses must be tested from observations.</p>
<p>There are also several types of scientific questions that are not hypothesis tests. For example:</p>
<ul>
<li><p>How many species of birds are unique to this region?</p></li>
<li><p>What is the distribution range of jack pine? How will it be changed by climate change in the 21st century?</p></li>
</ul>
</div>
<div id="role-of-statistics" class="section level2">
<h2>Role of statistics</h2>
<p>The following four goals summarize most statistical applications:</p>
<ul>
<li><p><em>Describe</em> and summarize the characteristics of a dataset.</p></li>
<li><p>From measurements taken on a sample of individuals, <em>estimate</em> the characteristics of a variable, or of a relationship between variables, at the population level.</p></li>
<li><p><em>Test</em> a hypothesis concerning these variables or relations between variables.</p></li>
<li><p><em>Predict</em> the value of a variable for a new individual out of the sample.</p></li>
</ul>
<div id="examples" class="section level3">
<h3>Examples</h3>
<ul>
<li><p>What is the average diameter of the trees measured in a plot? (description, since we have measured all trees)</p></li>
<li><p>How many moose are there in the Parc de la Vérendrye? (estimate, since we have not seen them all)</p>
<ul>
<li>Is the population growing compared to the previous year? (hypothesis test)</li>
<li>What will be the population in 10 years? (prediction)</li>
</ul></li>
</ul>
<p>The last three tasks (estimation, hypothesis testing and prediction) require the generalization of knowledge acquired from a limited number of observations. We will discuss them more in the following classes. For now, we focus on descriptive statistics.</p>
</div>
</div>
</div>
<div id="types-of-data" class="section level1">
<h1>Types of data</h1>
<div id="dataset" class="section level2">
<h2>Dataset</h2>
<p>For this lesson, we will use a tree inventory dataset from 20m x 20m plots at Kejimkujik National Park, Nova Scotia. These data are freely available on the Government of Canada Open Data Portal.</p>
<p>Here is an overview of the data. Here, <em>num_arbre</em> is the tree identification number, <em>nb_tiges</em> is the number of stems and <em>dhp</em> is the diameter at breast height (in cm).</p>
<pre><code>##   site parcelle jour mois annee num_arbre nb_tiges espece  dhp
## 1   BD        A   31    8  2004         1        1   TSCA 16.3
## 2   BD        A   31    8  2004         2        1   TSCA 24.0
## 3   BD        A   31    8  2004         6        1   TSCA 29.8
## 4   BD        A   31    8  2004         7        1   ACRU 29.0
## 5   BD        A   31    8  2004         8        1   TSCA 15.5
## 6   BD        A   31    8  2004         9        1   TSCA 32.0</code></pre>
<p>We will distinguish four types of data, divided into two groups: numerical variables and categorical variables (sometimes called qualitative):</p>
<ul>
<li><p><em>Continuous</em> numeric variables can take a (theoretically) infinite number of possible values in a given interval. Example: diameter.</p></li>
<li><p><em>Discrete</em> numeric variables can only take certain values in an interval, usually integers. Example: year, number of stems.</p></li>
<li><p><em>Nominal</em> categorical variables indicate category membership, but these categories are not ordered. Example: site, species.</p></li>
<li><p><em>Ordinal</em> categorical variables indicate the position on an ordered scale. Example: drainage class (xeric, mesic, hydrous), stage of life (seedling, sapling, mature tree).</p></li>
</ul>
<p>Ordinal categorical variables are sometimes represented by numbers. However, the levels of a categorical variable are not quantities and the distance between two levels is not defined numerically.</p>
</div>
</div>
<div id="visualizing-the-distribution-of-a-categorical-variable" class="section level1">
<h1>Visualizing the distribution of a categorical variable</h1>
<p>A <strong>bar graph</strong> is often used to visualize the number of observations in each category; in our example, the number of trees per species.</p>
<p><img src="1E-Descriptive_statistics_files/figure-html/bar_espece-1.png" width="672" /></p>
<p>To put emphasis on the proportion of observations per category, some use <strong>pie charts</strong>.</p>
<p><img src="1E-Descriptive_statistics_files/figure-html/circ_espece-1.png" width="672" /></p>
<p>Generally, pie charts are not recommended. They become difficult to read when the number of categories increases. Also, it is easier visually to estimate a length than a surface; in other words, the magnitudes can be better compared when they are represented on one dimension (as in the bar graph) than on two dimensions.</p>
<p>That said, the pie chart can be useful when you want to compare proportions to simple fractions like 1/2 or 1/4. For example, we see here that more than 50% of the trees belong to one of the two most common species, TSCA (hemlock) and ACRU (red maple).</p>
<p>For a dummy variable, the categories have no fixed order. By ordering them according to their frequency, as we have done here, we simplify the reading of the graph. For an ordinal variable, it is of course necessary to respect the order of the values of the variable.</p>
</div>
<div id="visualizing-the-distribution-of-a-continuous-numeric-variable" class="section level1">
<h1>Visualizing the distribution of a continuous numeric variable</h1>
<p>A <strong>histogram</strong> is obtained by counting the number of observations in bins of equal size on the axis of the observed variable. Below, the histogram of the DBH clearly shows the asymmetry of the distribution (several small diameter trees and a few trees with very large diameters). We also note that the inventory has a minimum DHH around 10 cm.</p>
<p><img src="1E-Descriptive_statistics_files/figure-html/histo_dhp-1.png" width="672" /></p>
<p>The approximation of the distribution by a histogram depends on the choice of bin width, so it is useful to test several values. With too large bins, information on small-scale frequency variation is lost; with too small bins, the distribution appears irregular due to lack of data in each bin.</p>
<p>The <strong>density plot</strong> uses a kernel density estimation method to approximate the continuous probability distribution from the observations. As with the histogram, the density plot includes a parameter that determines the resolution of the graph on the <em>x</em> axis, ranging from a smoother to a more irregular distribution.</p>
<p><img src="1E-Descriptive_statistics_files/figure-html/dens_dhp-1.png" width="672" /></p>
</div>
<div id="summary-statistics-of-a-numeric-variable" class="section level1">
<h1>Summary statistics of a numeric variable</h1>
<div id="mean-variance-and-standard-deviation" class="section level2">
<h2>Mean, variance and standard deviation</h2>
<p>Consider a data series <span class="math inline">\(x_1\)</span>, <span class="math inline">\(x_2\)</span>, …, <span class="math inline">\(x_n\)</span> from <span class="math inline">\(n\)</span> observations of a numeric variable <span class="math inline">\(x\)</span>.</p>
<p>The <strong>mean</strong> of <span class="math inline">\(x\)</span> is denoted <span class="math inline">\(\bar{x}\)</span> and defined as:</p>
<p><span class="math display">\[\bar{x} = \frac{x_1 + x_2 + ... + x_n}{n} = \frac{\sum_{i = 1}^{n} x_i}{n}\]</span></p>
<p>The average can be seen as the “balancing point” of a distribution: if each observation exerted a weight proportional to its distance from the average, these weights would be in equilibrium.</p>
<p><img src="../images/moyenne.PNG" /></p>
<p>By this definition, if we subtract <span class="math inline">\(\bar{x}\)</span> from each observation to obtain its deviation from the mean, the sum of these differences is equal to zero.</p>
<p><img src="../images/moyenne_ecart.PNG" /></p>
<p>To measure the degree of dispersion of the data around their mean, we take the square of deviations from the mean. The mean of these squared deviations is called the <strong>variance</strong>, denoted <span class="math inline">\(\sigma_x^2\)</span>.</p>
<p><span class="math display">\[\sigma_x^2 = \frac{\sum_{i = 1}^{n} (x_i - \bar{x})^2}{n}\]</span></p>
<p>The unit of measure for the variance differs from that of the data (e.g. for a diameter in cm, the variance is in cm<span class="math inline">\(^2\)</span>). For that reason, it is useful to report not the variance as such, but rather its square root, or <strong>standard deviation</strong> (<span class="math inline">\(\sigma_x\)</span>).</p>
<p><span class="math display">\[\sigma_x = \sqrt{\frac{\sum_{i = 1}^{n} (x_i - \bar{x})^2}{n}}\]</span></p>
<blockquote>
<p><strong>Note</strong>: Here, we use the mean and the variance to describe a series of data, without reference to a statistical model or to a larger population. As we will see in the next class, when we want to estimate the variance or standard deviation of a population from a sample, the division by <span class="math inline">\(n\)</span> is replaced by a division by <span class="math inline">\(n - 1\)</span>.</p>
</blockquote>
<p>Since the mean and the standard deviation have the same units, their ratio can be calculated to obtain a measure of the relative dispersion of the data. This ratio is called <strong>coefficient of variation</strong> (CV) and is usually expressed as a percentage.</p>
<p>In our dataset, the trees have a mean DBH of 21.8 cm, with a standard deviation of 12.3 cm (CV of 56%). We add a point on the histogram to represent the mean and a line corresponding to a standard deviation on each side of the mean. Note that if the mean and standard deviation provide some information on the distribution of values, other information such as the asymmetry of the distribution is lost.</p>
<p><img src="1E-Descriptive_statistics_files/figure-html/histo_moy_dhp-1.png" width="672" /></p>
</div>
<div id="rank-statistics" class="section level2">
<h2>Rank Statistics</h2>
<p>Other common summary statistics are based on the position of observations when they are ranked in ascending order. These include:</p>
<ul>
<li><p>the minimum and the maximum;</p></li>
<li><p>the <strong>median</strong>: defined as the central rank observation, or for an even number of data, the mean of the two central observations;</p></li>
<li><p>the <strong>quantiles</strong>.</p></li>
</ul>
<p>Quantiles can be seen as a generalization of the median. If the median divides the data into two groups containing the same number of observations, other types of quantiles divide the data into more than two groups. The most commonly used quantile types are quartiles (4 groups), quintiles (5 groups), deciles (10 groups) or percentiles (100 groups).</p>
<p>In particular, quartiles are used to define a graph named the <em>boxplot</em>.</p>
</div>
<div id="boxplot" class="section level2">
<h2>Boxplot</h2>
<p>Popularized by Tukey, this graph makes shows the position of the quartiles (including the median). The box between the 1st and 3rd quartile represents the region containing 50% of the observations. The distance between the 1st and 3rd quartile is called the interquartile range (or IQR). A whisker shows the range of the data on each side of the box.</p>
<p><img src="../images/boxplot.PNG" /></p>
<p>Often, the maximum length of the whiskers is based on the IQR (1.5x the IQR, according to Tukey’s convention). Extreme values beyond those limits are represented by points.</p>
<p><img src="1E-Descriptive_statistics_files/figure-html/boxplot_dhp-1.png" width="672" /></p>
<p>By juxtaposing the histogram of the DBH and boxplot, we see that the latter represents the essential characteristics of the distribution, including the asymmetry, the minimum DBH and the presence of some very large trees.</p>
<p><img src="1E-Descriptive_statistics_files/figure-html/histo_boxplot-1.png" width="672" /></p>
<p>Compared to the mean and standard deviation, quantile-based statistics are less sensitive to extreme values. Let’s see what happens if we remove the 18 trees (out of more than 1100) with a DBH greater than 65 cm.</p>
<p><img src="1E-Descriptive_statistics_files/figure-html/val_extr-1.png" width="672" /></p>
<p>The exclusion of these few large trees affects the average (4% decrease) and standard deviation (16% decrease) more than the median (1% decrease) or interquartile gap (2% decrease). Remember that the effect of an observation on the average depends on its distance to the latter. Comparatively, the median depends only on the number of smaller or larger observations, but not on the distance.</p>
<p>While the boxplot represents a distribution in a very coarse way, this simplicity can be an advantage when it comes to visualizing numerous distributions side-by-side. For example, we illustrate below the distribution of DBH of the main tree species at Kejimkujik. We see immediately that the DBH of white birches is less variable and distributed more symmetrically than that of other species.</p>
<p><img src="1E-Descriptive_statistics_files/figure-html/box_mult2-1.png" width="672" /></p>
</div>
</div>
<div id="summary-statistics-of-a-single-variable" class="section level1">
<h1>Summary: Statistics of a single variable</h1>
<p><strong>Numerical variables</strong></p>
<ul>
<li><p>Visualize distribution: box plot, histogram, density chart</p></li>
<li><p>Measures of central tendency: median, mean</p></li>
<li><p>Measures of dispersion: range (max - min), interquartile range, standard deviation</p></li>
<li><p>For data series at different scales, relative dispersion can be compared by calculating the coefficient of variation (ratio of the standard deviation to the mean, often expressed in %).</p></li>
</ul>
<p><strong>Categorical variables</strong></p>
<ul>
<li><p>Visualize the distribution: bar graph.</p></li>
<li><p>Nominal variable: Only possible measure of central tendency is the <strong>mode</strong> (the most common value).</p></li>
<li><p>Ordinal variable: Since the categories are ordered, we can also define the median.</p></li>
</ul>
</div>
<div id="relationship-between-two-numeric-variables" class="section level1">
<h1>Relationship between two numeric variables</h1>
<p>Finally, we will discuss statistics describing the relationship between two numeric variables. This relationship can be viewed using a <strong>scatter plot</strong>.</p>
<p>For example, here is a plot of the number of hours of sleep of 83 mammal species based on their body mass. The dataset comes from a study by Savage and West (2004) and is included with the <em>ggplot2</em> package in R.</p>
<p><img src="1E-Descriptive_statistics_files/figure-html/nuage_point-1.png" width="672" /></p>
<p>At first glance, there seems to be a trend where larger mammals sleep less.</p>
<div id="covariance-and-correlation" class="section level2">
<h2>Covariance and correlation</h2>
<p>Let us take two variables <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> measured on the same individuals. Remember that the variance is the mean of the squared deviations of a variable from its mean.</p>
<p><span class="math display">\[\sigma_x^2 = \frac{\sum_{i = 1}^{n} (x_i - \bar{x})^2}{n}\]</span></p>
<p>The <strong>covariance</strong> is the mean of the deviations of <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> from their respective means.</p>
<p><span class="math display">\[\sigma_{xy} = \frac{\sum_{i = 1}^{n} (x_i - \bar{x}) (y_i - \bar{y})}{n}\]</span></p>
<p>When the variables tend to both be above (or below) their average, the differences are more often of the same sign, so the covariance is positive. When the differences tend to be of opposite sign, the covariance is negative.</p>
<p>It can be shown that the maximum absolute value of the covariance is equal to the product of the standard deviations of the two variables. Dividing the covariance by the product of the standard deviations gives a normalized value in the range -1 to 1. This value is Pearson’s <strong>correlation coefficient</strong>, <span class="math inline">\(\rho_{xy}\)</span>.</p>
<p><span class="math display">\[\rho_{xy} = \frac{\sigma_{xy}}{\sigma_x \sigma_y}\]</span></p>
<p>Pearson’s correlation coefficient measures the <em>linear</em> association between two variables. A coefficient of 1 (respectively, -1) corresponds to a perfect positive correlation (resp., negative). A coefficient of 0 indicates no correlation. For our previous example (sleep hours vs. log body mass), <span class="math inline">\(\rho_{xy}\)</span> = -0.57.</p>
<p>If two variables are <strong>independent</strong>, i.e. knowing one of them does not provide any information on the other, their correlation is necessarily equal to zero. However, as the picture below shows, the opposite is not necessarily true.</p>
<p><img src="../images/Correlation_examples.png" /> <small>Source: Wikipédia</small></p>
<p>This figure shows the correlation coefficients associated with different scatter plots. The first row shows the progression from two independent variables (in the middle) towards stronger positive and negative associations. The second row shows that the correlation coefficient does not depend on the slope of a linear relationship between two variables. The third row gives several examples where the linear correlation is zero, even if there are (non-linear) association patterns between the two variables.</p>
</div>
</div>
<div id="initial-data-analysis" class="section level1">
<h1>Initial data analysis</h1>
<p>It is always useful to first explore the data before moving on to the modelling step. The purpose of this initial analysis is to become familiar with the dataset and identify its particularities or possible anomalies. Here are some suggested points to check.</p>
<p>For categorical variables:</p>
<ul>
<li>How many categories are there?</li>
<li>Are some categories very rare?</li>
</ul>
<p>For numeric variables:</p>
<ul>
<li>What is the range of the values?</li>
<li>Is the distribution strongly skewed?</li>
<li>Are there extreme values?</li>
</ul>
<p>For all types of variables:</p>
<ul>
<li>Are there missing values and how many?</li>
<li>Are there implausible values that could be errors?</li>
</ul>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p>For a more in-depth discussion of different methods and best practices to visualize data, I recommend the following online books:</p>
<ul>
<li><p>Healy, K. <em>Data Visualization: A practical introduction</em>. <a href="https://socviz.co/">https://socviz.co/</a> (physical book also available at the UQAT library)</p></li>
<li><p>Wilke, C.O. <em>Fundamentals of Data Visualization</em>. <a href="https://clauswilke.com/dataviz/">https://clauswilke.com/dataviz/</a></p></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
